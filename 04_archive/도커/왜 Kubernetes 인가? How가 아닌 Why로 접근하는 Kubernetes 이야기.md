---
tags:
  - 도커
아티클_링크: https://medium.com/naverfinancial/%EC%99%9C-kubernetes-%EC%9D%B8%EA%B0%80-how%EA%B0%80-%EC%95%84%EB%8B%8C-why%EB%A1%9C-%EC%A0%91%EA%B7%BC%ED%95%98%EB%8A%94-kubernetes-%EC%9D%B4%EC%95%BC%EA%B8%B0-a303aa513a8d
아티클_작성자: 김태우
---
### Bare Metal
- 의미상으론 어떤 프로그램도 깔리지 않은 서버를 표현하는 말
	( 실제론 빈 서버에 리눅스 같은 OS 및 프로그램 수동 설치해 서버 사용하는 방식 )
- 사실 당연히 요새는 클라우드 기반 서비스 이므로 , 생소함

#### Example
- 서버 컴퓨터 1 에는 리눅스 버전 1 설치 + 프로그램 A,B 를 설치했고 문제없이 동작
-> 프로그램 C 를 설치하자 문제 발생 ! ( 프로그램 C 는 리눅스 버전 2에서만 작동! )
-> 리눅스 버전을 업데이트해서 다시 실행 ( 프로그램 A 는 리눅스 버전 2 에서는 버그 발생 이슈! )
-> 리눅스 버전을 3으로 업데이트 ( 정상 실행이 되지 않음! -> 리눅스 버전이 제대로 설치 되지 않아서! )
-> 모두 설치 후 , 신규 프로그램 D 를 설치할 떄 문제 발생! ( 프로그램 간 프로그램의 버전 호환성 문제 발생! )

=> 정말 말도 안되게 어려웠던 일 ( 전부 충돌 없이 안정적으로 실행 시키는 일 )

### VM

- 하이퍼바이저 라는 플랫폼을 이용해 하나의 서버에 여러 OS 실행
- Host OS :  하이퍼바이저 '를' 실행하는 기본 OS
- Guest OS : 하이퍼바이 '가' 실행하는 분리된 OS

- OS 의 모든 환경을 일정하게 관리 / 복제 하는것이 가능
- 버전 호환성으로 고통을 받을 필요 X
- 한 대의 서버에 따라 여러 다른 버전 OS 를 사용 가능 

#### Is Good..?
- 위에서 말한 장점들은 해결 했으나 , 다른 문제점이 존재

-  기존 Host 위에 , Guest 를 올리는 것이므로 효율성 저하 발생! ( 컴퓨터에서 닌텐도 애뮬레이터 실행 과 비슷한 느낌 )
=> Docker 출시

### Docker
- vm이 제공하는 호환성 이슈는 해결하나 , 베어매탈과 유사한 성능 제공
- docker 는 프로그램 실행 필요한 binary 파일 과 library 파일만 가짐
---
Why?
- Docker 는 Kernel , FileSystem 등 전부 포함한 Linux OS 가 아닌 , FileSystem 과 Library 만 포함하는 Linux Image 사용
	 커널은 Host OS 의 커널을 공유 ( 자체 커널 없으므로 매우 가벼움 )
	  같은 자원이 완벽히 분리되어 있지 않지만 , CPU 와 Memory 를 '개념적' 분리 
	  ( 보안적으로는 취약하나 , 휠씬 빠르고 유연한 자원 분배 가능 )
![](https://i.imgur.com/LoaPWcZ.png)
##### 핵심
- 도커는 프로세스를 격리 ( VM 은 OS 를 격리 )
- linux container ( lxc ) 의 개념을 빌려옴

### k8s
- 사실 , docker container 가 아닌 , 많은 다른 engiene 과도 호환 가능

#### 도커가 뭐가 부족해??
- docker 가 가볍고 빨라도 , 핵심인 서버 관리를 해주지는 않는다!
	( Docker 서버 다운시 , 해당 서버는 트래픽 차단 + 수동으로 죽은 서버 찾아내 서버 띄워야 함 )
	( 서버 업데이트 진행 시 , 도커 서버 이미지만 바꿔서 올려야 했음 )
	( 트래픽이 너무 몰릴 시 , docker 서버를 증설해야 한 후 줄어들 시 , 직접 줄여야 했음 )
=> k8s 가 이러한 점들을 해결 해준다!

- 모든 Docker 관리 작업 자동화 한 플랫폼
- 사용자는 직접 관리 하지 않고 , 자동화 할 작업을 '선언' 만 함!
( k8s 에 유저는 A Docker Container 를 5개 띄운다고 선언 -> k8s 는 기존 환경에서 5개를 띄운 후 ,
	A 도커 서버를 관찰하며 , 서버가 다운될 시 자동으로 띄워 5개 서버 상태 유지하려고 함 )
=> 선언한 상태와 동일하게 만들려고 계속 노력

- k8s 는 결국 엔진이 아닌 플랫폼이고 , k8s 플랫폼을 구현한 Provider 를 통해 k8s 제공
	( EKS , GKE , AKS , NKS 등등 )

## 마무리
- k8s 의 등장배경에 대한 관점도 다를 수 있다!
	( Bare Metal - > VM - > Docker - > k8s ) - 각 단계의 불편함이 다음 단계를 만들었다는 관점
	( 모놀리틱 서버 -> MSA ) - 서버 바꿔가는 추세로 인해 도커가 유행하고 k8s 가 도입 됐다는 관점

=> 선택과 의견은 자유!
##### Writed By Obisidan