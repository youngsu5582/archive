---
tags:
  - 리팩토링
아티클_링크: https://hyeon9mak.github.io/writing-helpful-error-messages/
아티클_작성자: 현구막
추가_정보: 개인_블로그
---
오류 메시지는 결국 , 개발자가 사용자에게 상호작용을 할 수 있는 수단

잘 작성된 오류 메시지는 사용자 해결 위한 중요 정보 전달 하나
잘못된 오류 메시지는 사용자에게 혼란을 야기한다!

##### 잘못된 오류 메시지 특징

- 실행 불가능
- 애매모호 , 부정확 , 혼란스러움
- 불분명 원인
- 다음 취해야 할 행동 알 수 없음

##### 잘 작성된 오류 메시지 특징

- 실행 가능
- 좋은 사용자 경험 제공
- 적은 작업량 , 신속한 문제 해결
- 사용자가 스스로 다음 행동 취할 수 있음

### 오류 처리 규칙

#### 조용히 실패하지 않을 것

실패를 묵인하면 , 사용자는 실패의 이유를 궁금해하고
고객지원 팀 역시 문제 원인을 알 수 없어 , 올바른 정보 전달이 불가능!

조용히 실패하거나 , 실패가 보고되지 않는 일은 절대 발생하면 안된다
-> 오류는 필연적으로 발생하는 것 ( 큰 문제가아님 )
=> 오류를 묵익하여 프로그램 개선 기회 놓치고 , 좋은 경험 제공 못하는 것이 가장 큰 문제
#### 오류는 즉시 알릴 것

오류 붙잡고 있다가 나중에 발생시키면 오류 추적 디버깅 비용 크게 증가
-> 발생 지점에 최대한 빠르게 알림을 진행시키자!
#### 자세한 원인 명시할 것

`500: 서버에서 에러가 발생했습니다` 이 만큼 무책임한 에러 메시지가 없음

서버는 아래와 같이 정말 다양한 이유로 발생 가능
- 서비스 실패
- 네트워크 연결 끊김
- 권한 문제

사용자가 문제 이해하고 , 다음 행동 취하는데 도움을 줄 수 있어야 한다
( 당연히 , 자세한 내용 사용자에게 노출하는 것은 보안상 문제 
	-> 사용자가 다음 행동 결정할 수 있는 컨텍스트까지 제공 해주자 )

#### 에러 코드 기록할 것

에러 코드는 오류 모니터링 하고 진단하는데 큰 도움 ( 모두 공통화된 국룰이므로 )
적절 에러 코드 지정 시 , 엔지니어 or 담당자가 쉽게 조회 와 디버깅 진행 가능
가능한 모든 에러 코드에 대해 문서화를 진행하는게 BEST

### 오류 메시지 작성법

사용자에게 좋은 경험을 제공 하려면?
#### 오류 원인 전달
사용자를 대상으로 구체적 , 정확히 무엇이 잘못인지 전달하는 것이 가장 중요하다
( 모호한 오류 메시지는 나쁜 경험을 전달! )

```
❌ 유효하지 않은 디렉토리 입니다.

✅ 지정된 디렉토리가 존재하면 Write 를 할 수 없습니다.
   디렉토리에 파일 추가하려면 디렉토리 Write 권한이 있어야 합니다.
  [ 쓰기 권한 부여하는 방법 설명 ]
```
#### 올바르지 않은 입력 전달
사용자가 입력이 잘못되어 오류가 발생한 경우 , 사용자가 인지할 수 있도록 명시해야 한다.

```
❌ 잘못된 우편번호 입니다.

✅ 우편번호는 반드시 5자리 , 6자리 숫자로 이루어져야 합니다.
   입력한 우편번호 (...) 는 7자리 입니다.
```
##### 회원가입 이라면?
- 사용자가 버튼 제공 , 버튼 누르면 오류 목록 보여줌
- 올바른 입력 값 남기고 , 올바르지 않은 입력 값 모두 제거
#### 요구 사항 , 제약 사항 명시
모든 사용자는 시스템 제약사항에 관심 없음
-> 사용자가 요구 사항 , 제약 사항 , 정책을 이해하고 행동 취할 수 있도록 구체적 명시

```
❌ 프로필 이미지의 용량이 너무 큽니다.

✅ 프로필 이미지 크기(14MB)가 제한(10MB)를 초과합니다.
   [이미지 크기를 줄일 수 있는 방법 설명]
```
#### 해결 방법과 예시 제공
문제가 되는 원인 설명 후 , 사용자가 취할 수 있는 액션 담긴 메시지 작성

```
❌ 현재 버전의 앱은 더 이상 지원되지 않습니다.

✅ 현재 버전의 앱은 더 이상 지원되지 않습니다. "앱 업데이트" 버튼을 클릭해 업데이트를 진행해주세요
```

예시를 통해 사용자가 올바른 해결 방법 선택하는데 도움을 주자
```
❌ 올바르지 않은 이메일 형식입니다.

✅ 입력된 이메일 주소()에 @기호와 도메인 명이 필요합니다. 예 : joyson5582@gmail.com
```
#### 간결하고 명확하게
불필요한 내용 제거하고 최대한 간결하게 , 중요한 내용만 강조
( 수동태 -> 능동태로 변환하면 문장이 간결해지는 경우 존재한다 )

```
❌ 리소스를 찾거나 구별할 수 없습니다. 선택 항목이 클러스터에 존재하지 않습니다.

✅ <이름> 리소스가 <이름> 클러스터에 없습니다.
```

```java
❌ 파도타기 기능은 더 이상 싸이월드에서 지원되지 않습니다.

✅ 싸이월드는 더 이상 파도타기 기능을 지원하지 않습니다.
```

( 너무 많은 단어를 제거해 사용자가 이해하기 어렵게 만들지 않도록 주의하자 )
#### 이중 부정 금지

- 부정에 부정이면 긍정인가?
- 부정을 엄청나게 강조하는 건가?
-> 사용자를 혼란스럽게 만드는 원인

```
❌ 경로 대한 읽기 권한은 OS가 액세스를 금지하는 것을 방지

✅ 경로에 대한 읽기 권한 있으면 누구나 액세스 가능합니다
```
#### 사용자 위한 단어 선택
오류 메시지가 지식의 저주에 빠지지 않게 주의하자 ( 컴공의 CS 용어를 모두가 아는 건 아니다 )

```
❌ 서버의 CPU 사용량이 92%에 달해 클라이언트 요청을 제거했습니다. 5분 후 다시 시도하십시오.

✅ 현재 이용고객이 너무 많아 일시적 구매를 완료할 수 없습니다. 5분 후 다시 시도하십시오.
```
#### 일관된 용어 사용

대상 특정 단어로 표현했다면 , 모든 종류 오류 메시지에서 동일 단어로 표현
( 각각 다른 단어 사용하면 , 사용자는 동일 대상 지칭하는지 인지 불가능 )

```
❌ localhost:3306 애플리케이션에 연결할 수 없습니다. MySQL 이 실행 중인지 확인이 필요합니다.

✅ localhost:3306 애플리케이션에 연결할 수 없습니다. 애플리케이션이 실행 중인지 확인이 필요합니다.
```

### 가독성 높이기 위한 포맷

#### 상세 문서 링크
```
❌ 게시물에 안전하지 않은 정보가 포함되어 있습니다.

✅ 게시물에 안전하지 않은 정보가 포함되어 있습니다. 자세한 사항은 <docs link> 를 확인해주세요.
```
#### 점진적 메시지 전달
한 번에 긴 메시지 전달이 아닌 , 짧은 메시지를 먼저 전달 후 클릭 옵션 제공하자

```
❌ 
TextField widgets require a Material widget ancestor, 
but none were located. In material design, most widgets 
are conceptually “printed” on a sheet of material. 
...

✅  Recommended
TextField widgets require a Material widget ancestor, but none were located.
...(Click to see more.)
```
#### 오류와 가까운 곳에 메시지 배치

```
❌ 
1: program figure_1;
2: Grade = integer;
3: var
4. print("Hello")
Use ':' instead of '=' when declaring a variable.

✅ 
1: program figure_1;
2: Grade = integer; 
---------^ Syntax Error
Use ':' instead of '=' when declaring a variable.
```
#### 신중한 색상 배치
색맹의 비율은 생각보다 높다.
글꼴 색상을 통해 오류 메시지를 강조하고 싶은 경우 색상을 주의해서 사용하자

### 올바른 어조 사용
#### 긍정적 어조 사용
사용자가 무엇을 잘못했는지가 아닌 , 해결 방법을 이야기 하자
```
❌ 이름을 입력하지 않았습니다.

✅ 이름을 입력하세요.
```
#### 불필요한 미안함
"부디","죄송","미안" 같은 표현은 삼가하자
대신 명확한 문제설명과 해결방법을 제시하자
```
❌ 
불편을 끼쳐드려 대단히 죄송합니다.
서버 오류가 발생하여 일시적으로 스프레트 시트를 로드할 수 없습니다.
잠시 기다린 후 다시 시도해주세요.

✅
Google 문서도구에서 일시적으로 스프레드 시트를 로드할 수 없습니다.
문서 목록에서 스프레드 시트를 다운로드하거나, 잠시 기다린 후 다시 시도해주세요.
```
> 물론 문화적 차이를 고려해 사과는 Not Bad!
#### 불필요한 유머
대부분의 사용자는 오류로 화가 난 상태
- 유머로 받아들여지지 않을 가능성 매우 높음
- 사용자가 유머 잘못 해석해 더 큰 문제 야기 가능
- 유머로 인해 오류 메시지 목적 훼손 가능
#### 비난금지
사용자의 잘못( 원인 ) 보다 해결법에 초점을 맞추자

```
❌
오프라인 상태인 프린터를 지정했습니다. 오프라인 상태인 프린터는 이용할 수 없습니다.

✅
지정된 프린터가 오프라인입니다. 오프라인 상태인 프린터는 이용할 수 없습니다.
```

### 백엔드 엔지니어 위한 추가 지침
#### 에러 코드 제공
개발자가 오류 식별 , 탐색하는데 큰 도움이 된다.

```
❌ 오류 : 이 버킷을 이미 소유중입니다. 목록에서 다른 이름을 선택합니다.

✅ 409 : 이 버킷을 이미 소유중입니다. 목록에서 다른 이름을 선택합니다.
```

개발자들에게 모두 공통의 약속된 에러 코드이므로 유용
#### 관련 에러 이슈(문서) 포함
오류의 원인을 찾기 위해 로그 분석 -> 쉽게 탐색하도록 에러의 이슈 번호나 링크를 포함해주자!
