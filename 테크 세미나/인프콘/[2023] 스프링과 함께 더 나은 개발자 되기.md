

#### 충분히 공부하고 나서 실전에 사용?

- 개발은 실전
- 성장도 실전

#### 스프링 도입당시 고민의 상황

- 당시 대세 기술은 EJB
- 장난같은 오픈소스를 감히 엔터프라이즈 개발에?
- 스프링은 아직 0.9 버전 ( 그 당시 순위 5위 )
- 기술 서적이나 강의 X
=> 스프링 프레임워크가 왜 등장하게 됐는지에 대해서 알아보고 결정을 해보자
#### 스프링 프레임워크가 등장하게 된 배경

- J2EE , EJB 로 대규모 금융 시스템 개발 리드했던 개발자의 책
- 책 예제 코드 3만 라인
- 출판사 독자 게시판에서 오픈소스로 발전
=> 스프링 오픈 프로젝트의 시작

#### 신뢰하는 개발자의 추천

- Atlassian 대표 Mike Cannon Brooks
- Spring 이라는 걸 이용해 Confluence 를 만들고 있는데 너무 좋다

#### 도전해보고 싶은 마음을 만들기 위한 탐구

`[좌절]` 관련 서적이나 강의 X , 볼만한 친절한 자료 X
- 공식문서 : 1.0M3 - 29 페이지 , 1.0M4 - 35 페이지
- 튜토리얼 예제 : Petclinic
- MVC step-by-step
( JavaDoc 에 매우 자세하고 상세하게 설명이 되어 있었다. )

=> Spirng 을 써보자! 선택

#### 무슨 일이 있어도

- 왜 이렇게 개발해야 하나?
- 이건 도대체 뭐하는 것인가??
- 왜 개발이 잘되는 걸까?

#### 왜 이렇게 개발해야 하나?

- IoC / DI
- XML 쓰자는 것인가?

![400](https://i.imgur.com/Iq8TYJt.png)

페이지 하나 만드는데 왜 이렇게 까지 해야할까?
#### 이건 도대체 뭐하는 것인가?

![400](https://i.imgur.com/czQfMjh.png)

트랜잭션을 서비스에서 사용할 때 마다 이 모든 걸 다 복붙해야 하나??

#### 왜 개발이 잘 되는 것인가?

- 거대하고 복잡한 로직을 담은 , 계속 발전하는 코드인데 시간이 흘러도 파악하기 어렵지 않음
- 기능 변경할 때 어느 부분 찾아서 수정할지 명확
- EJB 시절보다 코드 70 % 감소 , 생산성 3배 이상 향상
- 기술 잊게 되고 , 비즈니스 로직에만 집중

=> 다음에도 이런식으로 개발을 반복해야 하는가?

### 질문과 탐구

- 내가 사용하는 기술은 왜 이렇게 만들어졌는가?
- 나는 왜 이렇게 설계하고 , 코드를 작성해야 하는가?

#### 질문의 답을 찾기 위해

- 공식 레퍼런스 문서
- 코드 API 문서
- 튜토리얼 문서
- 오픈소스 프로젝트 게시판 / 포럼
- 블로그
- 서적
- 컨퍼런스
- 채팅 / 수다

스프링이 강조하는 IoC / DI 는 과연 무엇인가?
내가 작성하는 코드에 무슨 도움이 될 수 있나?

##### 스프링의 목표가 무엇인지 발견

- 스프링 철학이라는 컨퍼런스 발표에서 힌트를 얻음
- 기존 살펴본 책과 문서에서 관련된 내용을 다시 살펴봄
- 생각 정리해서 블로그 작성
- 기회가 생겨 공개 발표
=> 본격적인 이해의 시작

DI - 오브젝트 간 의존관계를 외부에서 주입
IoC - 오브젝트 내부에서 외부로 의존관계 제어 역활전환
-> 스프링의 모든 핵심 기술은 IoC DI 로 만들어 져있음

##### 객체 지향

- 결국 IoC / DI 란 객체지향 설계 원리에 충실하려고 나온게 아닐까?
> 객체지향 설계는 특정 기술 , 자바보다 중요하다
> 특정 기술이 겍체지향 설계를 어렵게 하는 것을 피하라

- 마틴 파울러의 IoC 컨테이너 와 Dependency Injection 패턴 ( 2004 )
- 마틴 파울러의 Inversion of Control ( 2005 )
	- 하단 두가지에서 IoC 라는 용어 기원
	- Designing Reusable Classess ( 1988 )
	- GoF 의 Design Patterns ( 1994 )

DI -> IoC -> Design Pattern 

##### 디자인 패턴

대상이 되는 클래스 와 다이어그램 에만 집중하는게 아니라,
어떻게 사용해야 한다는 설명 부분 역시 잘 봐야 한다.

- 전략 패턴 - Context 와 Stragety 구현의 합성
![400](https://i.imgur.com/xuiOEBI.png)

런타임 시 , 오브젝트를 합성하는 패턴
![400](https://i.imgur.com/IEL6mKF.png)

=> 이런 것들을 IoC 에 적용을 해보자
이거 완전 D.I 에 대한 설명인데?

Design Pattern -> D.I

##### D.I

- 서버의 서비스 오브젝트 생성 과 생명주기 관리하는 컨테이너
- 여기에 오브젝트 합성 대신하도록 제어 책임 역전하면 IoC!
- 동적인 오브젝트 합성을 IoC로 수행하는 것이 DI
=> 그래서 스프링은 IoC/DI 컨테이너


오브젝트 합성 이용하는 패턴은 대부분 DI 로 사용 가능하구나!


### 스프링은 어떻게 잘 적용하고 있나?

#### 템플릿 / 콜백 패턴

역시 전략 패턴
( 전략이 구현하고 인터페이스 메소드가 딱 하나 인 특별 케이스 )
이를 콜백이라 부르고 , 사용하는 것을 컨텍스트 템플릿이라 부름 
( 단일 메소드 사용 인터페이스 는 Java8 에서 람다식이라 불림 )

#### 웹 MVC

#### DispatcherServlet

DispatcherServlet 의 기본 전략 

이 역시 전략 패턴 구성
( HandlerMapping , HandlerAdapter , ViewResolver ... )
- 전략 변경으로 기능 확장과 기술 발전

##### SimpleFormController

템플릿 메소드 패턴
![](https://i.imgur.com/gb92GhB.png)

- 웹 요청 처리하는 플로우 뼈대 제공하며 각 단계별로 변경 & 확장 
- 템플릿 메소드와 전략 패턴을 함께 작용
#### AOP

 데코레이터 / 프록시 패턴

Dynamic Proxy 를 이용한 AOP 역시도 데코레이터 패턴 활용
서비스 추상화와 결합해서 사용
- Transaction
- Security


### 변화를 위한 설계

- OCP
- 변화에 흔들리지 않는 견고한 객체지향 설계
- 스프링이 지지하는 객체지향 설계가 스프링 자신에 뛰어나게 반영
=> 끊임없이 변해야하는 애플리케이션에서 변화를 감당할 수 있으면서도 흔들리지 않게 개발하자


- 핵심 인터페이스와 구조의 변화 없이 스프링 기능을 끊임 없이 확장
	- 빈 구성 : XML , 스키마 , 스캔 , 자바코드 , 애노테이션
	- MVC : XML , 애노테이션 , 함수형

#### 끊임 없는 질문과 이에 대한 답을 찾는 탐구를 통해서
- 스프링의 목표와 철학 , 원리 이해
- 스프링의 기술에 적용된 설계방식 , 디자인 패턴 과 활용 방법을 파악
( 하나의 구조 , 목표 & 원리에 의해 다 만들어졌다는 생각을 하고 다시 보니 전부 일관요연하게 이해 )

- 다른 오픈 소스 프로젝트를 보든 , 새로운 프로젝트에 투입을 되든 너무 쉽게 이해 가능 
- 내가 작성하는 애플리케이션 코드에도 동일한 원리 와 설계 적용!

=> 스프링은 단순하게 엔티티 , 컨트롤러 , 서비스 , 레포지토리만 찍어내는 도구가 아니다!!

#### 부록 : 스프링은 정말 비동기 프로그래밍을 하지 못하나?

2010년도 당시 , Node.js 가 나오며 비동기 논블로킹 I/O 로 높은 처리 성능을 보이나,
자바 / 스프링은 그런 기능이 없었다

=> 정말 그런가? 🤔

- 비동기 서블릿 ( 서블릿 3 )
- 비동기 웹 프로세싱 ( 스프링 3.2 )
- AsyncRestTemplate ( 스프링 4.x )
- WebFlux , WebClient , Kotlin Corutine ( 스프링 5.x )
- Virtual Thread ( 스프링 6.1 )
=> 이 처럼 자바 / 스프링 역시 꾸준히 성장을 해나갔다

### 훈련과 개선

#### 회사 업무 & 단순 기술 공부 튜토리얼 따라하는 것 말고 코딩을 하는가?

- 스프링을 통해 배운 것을 응용해보는 코딩을 꾸준히
- 튜토리얼 예제를 반복해서 작성
- 새로운 기능 추가하고 , 설계 구조 변경해보려는 시도
- 실무에서 사용하지 못한 기술 도입
- 연습용 어플리케이션 구상하고 설계
- 초기 개발 생산성 , 변경 용이성 등 관찰
#### 테스트의 세계로

로드 존슨 의 책에서는 챕터 하나를 통채로 테스트에 대해 설명했다
( 이 때 당시만해도 , 그냥 메뉴얼 대로 테스팅만 하는게 만연하던 시기 )

-> 방대하고 , 꼼꼼하게 작성된 스프링의 테스트 코드가 신기햇음

테스트 작성 방법은 스프링 소스 코드의 테스트를 보면서 배움

- Spring 0.9 : JUnit 3.8
- 단위 테스트 작성
- Spring 1.1 : EasyMock
- 스프링이 제공하는 mock 을 사용

##### Context 테스트 와 Transactional 테스트
- Spring 1.1.1
- 컨텍스트 테스트 : AbstractSpringContextTests
- 트랜잭션 테스트 : AbstractTransactionalSpringContextTests

이 두가지 클래스를 상속해서 , 테스트 코드 구현 ( 애노테이션이 없었음 )

- 리팩토리 - 마틴 파울러
- 테스트 주도 개발 - 켄트 백
이 두 책에 관심을 가지기 시작했다

- xUnit을 xUnit 없이 TDD 로 만들기 같은 노력을 시도해봄
- 학습 테스트
	-> 남이 만든 걸 테스트 하기 위해 테스트 코드를 작성하자
	( 코드 리뷰를 위해서? => No! )
	코드의 사용법을 내가 익히기 위해서

- 어떤 외부 기술이 버전 업 되거나 바뀌었을 때 내가 사용한 기술이 동일하게 적용 되는가 확인하는 것도 Good!

#### 스프링과 테스트

- 한때 DI 는 단지 테스트를 위한 것이라는 오해 있을 정도로 , 단위 테스트 가능성 , 테스트 편의성을 높여준다
- 다양한 테스트 작성 도구 제공
- 테스트와 함께 만들어진 코드의 품질을 보여줌
=> 테스트 작성도 안 하며 , 스프링은 뭐하러 쓰지? ( Factos )


#### 코딩 훈련은 꾸준히 필요하다

실전 개발도 연습과 훈련이 되긴 하지만스스로 목표와 의도를 가지고 , 개발해보는 시간 역시 필요하다

기술을 선택하고 설계하고 코드 작성의 효과를 보고 이를 개선해가는 과정역시도 필요합니다
모든 선택에는 고민이 필요하고 , 나의 결정 & 작업한 결과에 대해 설명할 수 있어야 한다

테스트는 반드시 작성

( TDD 가 가장 좋지만 , TLP - Test Last Programming 역시 뭐 어떤가? 하기만 하면 OK )

##### 개발 방식과 코드 개선

새로운 언어 , 스프링 신규버전 , 다양한 오픈소스 기술들의 도입
기존 프로젝트 의 업그레이드 와 신규 프로젝트에 적용
신규 프로젝트 할 때는 초반에 프레임워크 개발이나 개선 점을 찾으며 틀을 만들어가자
( 되게 중요한 훈련 )


### 공유와 논쟁

- 고민과 경험을 정리하는 기회 역시 꾸준히 필요
- 글 작성이나 발표 같은 형식이 도움
- 물론 공격을 받거나 , 논쟁이 벌어질 수도 있음 
- 개인 위키 , 문서 도구 활용
	-> 단순 정리에 시간을 많이 들이면 , 효율이 떨어지고 지속하기 어려움
( 대부분이 복사 , 붙혀넣기의 수준의 글에 그치고 , 4~5차시 정도가 되면 내용이 끊긴다 )

=> 다시 이거를 읽어봐도 그때 꼭 다시 기억할 수 있으면 좋겠다 싶은 내용을
나의 언어로 잘 설명할 수 있는 표현들을 담아서 정리를 해야 함
( 그래야 작성이 쉬워지고 , 이후 빠르게 검색할 수 있는 도구를 잘 활용 )

![500](https://i.imgur.com/rHoa3K2.png)

![500](https://i.imgur.com/IUQetzC.png)

토비마저 이렇게 정리를 해가고 , 중요 표시를 하고 표현을 하는데 내까짓게??

#### 나만의 정의 와 설명을 만들어 가기

- 한 문장으로 정의

정리를 하다 보면 , 남의 설명만 계속 보는 것

( 당장 앞에 얘기한 D.I 와 IoC 만 설명 해보라고 하더라도 , 자신있게 못 한다 )

위키피디아에 있는걸 그냥 외워도 되지만 , 이해하려면 제일 중요한 특징을 담은 나만의 정의를 만들어낼수 있어야 한다

- 한 문단으로 정리

여기에 더 살을 붙혀서 한 문단으로 내용을 마무리 하는 실력을 키우자

토비는 다섯줄 정도라도 그냥 자신이 온전히 이해한 것을 블로그에 나타내는게 중요하다고 생각한다 

- 5분간 핵심을 설명

팀장 및 팀원들한테 해당 기술을 왜 사용해야 하는가 설득하기 위해 5분 정도 시간을 달라하고 ,
그 핵심을 담아서 설명을 할 수 있는 정도의 실력을 갖추자

- 한 시간 동안 예제를 만들면서 설명

예제 코드를 만들면서 이거에 대한 충분한 설명을 더 할 수 있어야 한다

- 하루 동안 진행되는 교육

하루 정도 교육을 진행해야 한다 하면 , 스스로가 구성하고 만드는 것이 가능할 수 있다면 좋다

모든 것들은 나만의 이야기를 만들어 나가는 것이 중요하다

#### 커뮤니티 와 대외 활동

- 기존 기술 비판하기 보다는 좋은 기술을 알리는데 집중
- 커뮤니티 참여한 사람들과 긴밀한 교류 , 서로 발전을 응원
- 해외 커뮤니티 활동을 참고 ( BJUG )
- 토비는 2007년 한국 스프링 사용자 모임 설립 ( KSUG )

#### 스프링 책 집필

- 매우 힘들지만 , 결과적으로 큰 보람 느낌
- 기존 서적과 다르게 , 내가 알게된 지식을 전달하는 나만의 방법을 고민
- 